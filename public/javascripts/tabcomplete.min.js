/*!
 * tabcomplete
 * http://github.com/erming/tabcomplete
 * v1.3.1
 */
!function(a){function b(b,c,d){return a.grep(c,function(a){return d?!a.indexOf(b):!a.toLowerCase().indexOf(b.toLowerCase())})}function c(b){var c=this,d=c.prev(".hint");c.css({backgroundColor:"transparent",position:"relative"}),d.length||(c.wrap(a("<div>").css({position:"relative"})),d=c.clone().attr("tabindex",-1).removeAttr("id name placeholder").addClass("hint").insertBefore(c),d.css({position:"absolute"}));var e="";if("undefined"!=typeof b){var f=c.val();e=f+b.substr(f.split(/ |\n/).pop().length)}d.val(e)}function d(a){var b=this,c=b.val();a&&(b.val(c+a.substr(c.split(/ |\n/).pop().length)),b[0].selectionStart=c.length)}var e={backspace:8,tab:9,up:38,down:40};a.fn.tab=a.fn.tabcomplete=function(f,g){if(this.length>1)return this.each(function(){a(this).tabcomplete(f,g)});var h=this.prop("tagName");if("INPUT"==h||"TEXTAREA"==h){g=a.extend({after:"",arrowKeys:"INPUT"==h?!0:!1,caseSensitive:!1,hint:"placeholder",minLength:1},g),this.unbind(".tabcomplete"),this.prev(".hint").remove();var i=this,j=!1,k=-1,l=[],m="",n=a.noop;switch(g.hint){case"placeholder":n=c;break;case"select":n=d}return this.on("input.tabcomplete",function(){var c=i.val(),d=c.split(/ |\n/).pop();k=-1,m="",l=[],i[0].selectionStart==c.length&&d.length&&(l="function"==typeof f?f(d):b(d,f,g.caseSensitive),g.after&&(l=a.map(l,function(a){return a+g.after}))),i.trigger("match",l.length),g.hint&&(("select"!=g.hint||!j)&&d.length>=g.minLength?n.call(i,l[0]):n.call(i,"")),j&&(j=!1)}),this.on("keydown.tabcomplete",function(a){var b=a.which;if(b==e.tab||g.arrowKeys&&(b==e.up||b==e.down)){if(a.preventDefault(),b!=e.up)k++;else{if(-1==k)return;0==k?k=l.length-1:k--}var c=l[k%l.length];if(!c)return;var d=i.val();if(m=m||d.split(/ |\n/).pop(),m.length<g.minLength)return;var f=d.substr(0,i[0].selectionStart-m.length)+c;i.val(f),"select"==g.hint&&(i[0].selectionStart=f.length),m=c,i.trigger("tabcomplete",m),g.hint&&n.call(i,"")}else a.which==e.backspace&&(j=!0,k=-1,m="")}),g.hint&&n.call(this,""),this}}}(jQuery);